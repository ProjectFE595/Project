<!DOCTYPE html>
<!-- Author: Yun Chen -->
<!-- Last Update: Nov 16th, 2016 -->
<!-- Stevens FE595 Project -->
<html>
<head>
    <title>User Views</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'interface/style.css' %}" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript">

	stocks = JSON.stringify({{ stockList }})
	stocks = JSON.parse(stocks);
	stocks2 = JSON.stringify({{ cflStockList }})
	stocks2 = JSON.parse(stocks2);
	
	
	muAdj100 = JSON.stringify({{ muAdj100 }})
	muAdj100 = JSON.parse(muAdj100);
	
	cflAdj100 = JSON.stringify({{ cflAdj100 }})
	cflAdj100 = JSON.parse(cflAdj100);
	
    </script>
</head>
<body>
    <noscript>Sorry, your browser does not support JavaScript!</noscript>
	
    <div id="div3">
	<h1 align = "center">Input User Views</h1>
	</div> 
	
	<div id="div4">
	<form action="../plot/" method="post" >
		{% csrf_token %}
	<table style="width:100%">
	<tr>
		<td style="width:40%"> 
		<table style = "width:100%">
			<caption>Your basic parameters:</caption>
			<tr>		
				<td>           
					<p>Start Date: <input type="text" name="startDate" id="datepicker1" value="{{ startDate }}" readonly></p>
					<p>End Date: <input type="text" name="endDate" id="datepicker2" value="{{ endDate }}" readonly></p>
					<p>Historical Window: <input type="number" name="histWindow" min="20" max="50000" value="{{ histWindow }}"  readonly></p>
					<p>Rebalance Frequency: <input type="number" name="rebalanceFrequency" min="100" max="2500" value="{{ rebalanceFrequency }}"  readonly></p>
					<p>Future Horizon: <input type="number" name="futureHorizon" min="2" max="30" value="{{ futureHorizon }}"  readonly></p>
					<p>rf(%): <input type="number" name="rf100" min="-0.1" max="0.99" step="0.01" value="{{ rf100 }}"  readonly></p>
					<p>tau: <input type="number" name="tau" min="0" max="0.99" step="0.001" value="{{ tau }}"  readonly></p>     
				</td>
			</tr>			
		</table>
		</td>
		<td style="width:60%"> 
		<table style = "width:100%" id="userview">
			<caption>Input your personal views on expected return and confidence:</caption>
			<tr>
				<th>Stocks</th> <th>Expected Return</th> <th>Confidence</th>
			</tr>
			<tr>
			<script>
				var i;
				for (i = 0; i < Object.keys(stocks).length; i++) { 
					document.write("<tr><td class='narrow'>" + stocks[i] + ": </td>")
					document.write("<td class='narrow'><input type='number' name=" + stocks[i] + " step='0.0001' value=" + Math.round(muAdj100[i]*10000)/10000 + ">%</td>");
					document.write("<td class='narrow'><input type='number' name=" + stocks2[i] + " step='0.0001' min = '0' max = '100' value=" + Math.round(cflAdj100[i]*10000)/10000 + ">%</td>");
					document.write("</tr>");
				}				
			</script>				
			</tr>
		</table>
		</td>	
	</tr>
	<tr >
		<div id="div5" style="display:none;">
			<textarea name="stockList" readonly> {{ stockList }} </textarea>
		</div>
		<td colspan="2" align = "center">
			<br>
            <p><input type="reset" class="button">   <input type="submit" value="Submit" class="button"/></p>
        
		</td>			
	</tr>	
	</table>
	</form>	
	</div>



</body>
</html>
